---
description: 使用以太坊登录
---

# 4.2 连接钱包和Sign-In with Ethereum

## 连接钱包

在以太坊dApp的首页面，我们常常能看到一个叫“连接钱包”的按钮。这个按钮的背后对应的是一个叫做WalletConnect的协议。

WalletConnect是加密货币钱包广泛使用的协议。WalletConnect 是去中心化的 Web3 消息传递层，是将区块链钱包连接到 dapp 的标准，它支持个人钱包账户与DApp和其它钱包关联交互。即通过扫描二维码或点击深层链接，WalletConnect 在钱包账户与DApp之间建立加密连接。

该开源协议也会推送通知，提醒用户即将到来的交易。

大多数DApp的右上角均设有“连接钱包”按钮，如果你使用的是手机钱包直接访问该DApp网站，点击该按钮即可。

如果你使用的是桌面浏览器访问DApp网站，则点击“连接钱包”按钮。屏幕中可能随即显示列出不同钱包关联选项的弹窗。点击\[WalletConnect]，生成二维码。你要用手机钱包扫码，才能建立连接。

## 使用以太坊登录

“使用以太坊登录” (Sign-In with Ethereum, SIWE) 颠覆了互联网上的用户身份验证手段。

使用以太坊登录描述了以太坊帐户如何通过签署由作用域、session详细信息和安全机制（例如，随机数）参数化的标准消息格式来使用链下服务进行身份验证。

最新的智能合约标准为[EIP-4361](https://eips.ethereum.org/EIPS/eip-4361)。

SIWE的目标是为中心化身份提供者提供一种自我托管的替代方案，提高基于以太坊身份验证的跨链服务的互操作性，并为钱包供应商提供一致的机器可读消息格式，以实现改进的用户体验和授权管理。

### SIWE的动机

在登录当今流行的非区块链服务时，用户通常会依赖于身份提供商 (IdP)，这些身份提供商是对用户身份具有最终控制权的中心化实体，例如大型互联网公司和电子邮件提供商。这些机构之间的动机和嗜好往往不一致。Sign-In with Ethereum 为希望对自己的数字身份拥有更多控制权和自行担责的用户提供了一种新的自我管理选项。

许多服务已经为使用消息签名对以太坊帐户进行身份验证提供了工作流，例如建立基于 cookie 的网络会话，该会话可以管理某个身份验证中地址的特权元数据。这是一个标准化登录工作流程并能改善现有服务之间互操作性的机会，同时还为钱包供应商提供了一种可靠的方法来将签名请求识别为使用以太坊登录以改进用户体验的请求。

不需要经过中间商，用户现在可以使用控制其以太坊钱包账户的同一个私钥直接登录dApp。通过SIWE，我们开辟了另一条道路，大公司不再能剥夺用户访问服务的能力，也不能监视他们的行为。

SIWE 是一个完全公开的认证标准，通过与dapp、app、钱包、安全公司等社区成员的公开讨论来实现。你可以在网站login.xyz 上找到所有的会议记录和笔记。这种方法与科技巨头或政府供应商的专有身份系统的封闭式开发大相径庭。

简言之：Sign-In with Ethereum (EIP-4361) 为以太坊账户定义了一种开放的知识共享(creative commons, CC) 签名格式，以安全地验证任何基于网络的服务。

## 连接钱包vs. 使用以太坊登录

“连接钱包” 这个按钮是现在dapp 的主要功能。点击这个按钮，用户就开始了与Web3 和区块链交互的旅程。

通过连接钱包，应用程序可以知道你使用的是哪个账户，这样你的钱包就知道你想用哪个账户来与智能合约互动或者发送通证，甚至通过dapp 对信息进行签名。

当应用程序想要和用户进行更丰富的情境交互(contextual interactions) 时，比如加载用户的偏好或隐私聊天讯息，我们首先需要确保我们是在和该账户背后的实际私钥持有者对话，而不是某个假装对账户持有控制权的人。“连接钱包” 不提供这种保证，但SIWE 可以。换句话说，我们需要对用户进行身份验证，以便与他们建立一个session，然后安全地读写他们的数据。

SIWE 信息也可以被理解为访问特定资源的授权，或者对session 私钥的委托，以提高dapp用户体验的功能性和易用性。

更多内容，可参阅：

[SIWE（使用以太坊登录）技术前沿讨论](https://chainfeeds.xyz/topic/detail/54d9620c-37dc-4458-a23b-823610e2f31b)
